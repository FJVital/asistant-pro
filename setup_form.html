<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Setup Your Clerk - asistant.pro</title>
  <link rel="icon" type="image/png" href="asistant_pro_favicon.png">
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
  <style>
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      margin: 0;
      padding: 0;
      background: linear-gradient(180deg, #f7f9fb 0%, #eef2f6 100%);
      color: #0f1724;
      min-height: 100vh;
    }
    
    header {
      text-align: center;
      padding: 30px 20px;
      background: #fff;
      border-bottom: 1px solid rgba(15, 23, 42, 0.04);
    }
    
    header img {
      max-width: 280px;
      height: auto;
    }
    
    .setup-illustration {
      max-width: 300px;
      width: 75%;
      height: auto;
      margin: 20px auto;
      display: block;
    }
    
    main {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
    }
    
    .setup-container {
      background: #fff;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(15, 23, 42, 0.08);
    }
    
    h1 {
      text-align: center;
      margin-bottom: 12px;
      color: #0f1724;
      font-size: 2rem;
    }
    
    .intro {
      text-align: center;
      color: #475569;
      margin-bottom: 32px;
      font-size: 1.1rem;
      line-height: 1.6;
    }
    
    .plan-indicator {
      background: #f0f9ff;
      border: 2px solid #2e2dbd;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      text-align: center;
    }
    
    .plan-indicator h2 {
      color: #2e2dbd;
      margin: 0;
      font-size: 1.3rem;
    }
    
    .form-section {
      margin-bottom: 32px;
    }
    
    .form-section h3 {
      color: #0f1724;
      margin-bottom: 16px;
      font-size: 1.2rem;
      border-bottom: 2px solid #2e2dbd;
      padding-bottom: 8px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 20px;
    }
    
    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
    
    label {
      display: block;
      margin-bottom: 16px;
      color: #374151;
      font-weight: 500;
    }
    
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select {
      width: 100%;
      padding: 12px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 16px;
      margin-top: 4px;
      transition: border-color 0.2s ease;
    }
    
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="tel"]:focus,
    select:focus {
      outline: none;
      border-color: #2e2dbd;
      box-shadow: 0 0 0 3px rgba(46, 45, 189, 0.1);
    }
    
    .functions-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 12px;
    }
    
    .function-item {
      display: flex;
      align-items: center;
      padding: 12px;
      background: #f8f9fb;
      border-radius: 8px;
      transition: background-color 0.2s ease;
    }
    
    .function-item:hover {
      background: #eef2f6;
    }
    
    .function-item input[type="checkbox"] {
      margin-right: 12px;
      transform: scale(1.2);
    }
    
    .function-item label {
      margin: 0;
      cursor: pointer;
      flex: 1;
    }
    
    .limit-warning {
      background: #fef3f2;
      border-left: 4px solid #f87171;
      padding: 12px;
      border-radius: 4px;
      margin-top: 16px;
      color: #dc2626;
      font-size: 0.9rem;
      display: none;
    }
    
    .submit-section {
      text-align: center;
      margin-top: 40px;
      padding-top: 32px;
      border-top: 1px solid #e5e7eb;
    }
    
    .submit-button img {
      max-width: 200px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .submit-button img:hover {
      transform: translateY(-2px);
    }
    
    .back-home {
      text-align: center;
      margin-top: 32px;
    }
    
    .back-home img {
      max-width: 200px;
      height: auto;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .back-home img:hover {
      transform: translateY(-2px);
    }
  </style>
</head>
<body>

<header>
  <img src="asistant_pro_logo.png" alt="asistant.pro Logo">
  <img src="setup_form.png" alt="Setup Form" class="setup-illustration">
</header>

<main>
  <div class="setup-container">
    <h1>Setup Your Digital Clerk</h1>
    
    <div class="plan-indicator" id="planIndicator">
      <h2 id="planTitle">Setting up your Digital Clerk</h2>
    </div>
    
    <p class="intro">
      Thank you for subscribing! Please provide the details below so we can personalize your clerk and get it ready to transform your productivity.
    </p>

    <form id="setupForm">
      <!-- Hidden field to capture the plan -->
      <input type="hidden" name="plan_type" id="planType" value="">
      
      <!-- Contact Information -->
      <div class="form-section">
        <h3>Your Information</h3>
        <div class="form-grid">
          <label>
            Full Name *
            <input type="text" name="from_name" required>
          </label>
          <label>
            Email Address *
            <input type="email" name="reply_to" required>
          </label>
        </div>
        <div class="form-grid">
          <label>
            Company Name
            <input type="text" name="company" placeholder="Optional">
          </label>
          <label>
            Phone Number
            <input type="tel" name="phone" placeholder="Optional">
          </label>
        </div>
        <label>
          Industry/Role
          <select name="industry">
            <option value="">Select your industry</option>
            <option value="Freelancer">Freelancer</option>
            <option value="Small Business Owner">Small Business Owner</option>
            <option value="Real Estate">Real Estate</option>
            <option value="Consulting">Consulting</option>
            <option value="Healthcare">Healthcare</option>
            <option value="Legal">Legal</option>
            <option value="Marketing">Marketing</option>
            <option value="Finance">Finance</option>
            <option value="Other">Other</option>
          </select>
        </label>
      </div>

      <!-- Clerk Configuration -->
      <div class="form-section">
        <h3>Clerk Configuration</h3>
        <label>
          Name Your Clerk *
          <input type="text" name="clerk_name" placeholder="e.g., Alex, Sam, Clara" required>
        </label>

        <div style="margin-top: 24px;">
          <label style="font-size: 1.1rem; color: #0f1724;">
            Choose Functions for Your Clerk
            <span id="functionLimit" style="font-size: 0.9rem; color: #6b7280;"></span>
          </label>
          
          <div class="functions-grid">
            <div class="function-item">
              <input type="checkbox" name="functions" value="Answer Emails" id="func1">
              <label for="func1">üìß Answer & draft routine emails</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Manage Calendar" id="func2">
              <label for="func2">üìÖ Manage calendar & scheduling</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Set Reminders" id="func3">
              <label for="func3">‚è∞ Set reminders & follow-ups</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Take Notes" id="func4">
              <label for="func4">üìù Take notes & draft content</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Generate Reports" id="func5">
              <label for="func5">üìä Generate reports & summaries</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Track Tasks" id="func6">
              <label for="func6">‚úÖ Track tasks & deadlines</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Client Communications" id="func7">
              <label for="func7">üí¨ Handle client communications</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Document Organization" id="func8">
              <label for="func8">üóÇÔ∏è Organize documents & files</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Research Tasks" id="func9">
              <label for="func9">üîç Research & information gathering</label>
            </div>
            <div class="function-item">
              <input type="checkbox" name="functions" value="Meeting Preparation" id="func10">
              <label for="func10">üéØ Meeting preparation & follow-up</label>
            </div>
          </div>
          
          <div id="limitWarning" class="limit-warning">
            You can only select up to <span id="maxSelections"></span> functions with your plan. Please uncheck some items.
          </div>
        </div>
      </div>

      <div class="submit-section">
        <div class="submit-button">
          <img src="button_send_message.png" alt="Send Setup Request" onclick="sendForm()">
        </div>
      </div>
    </form>

    <div class="back-home">
      <a href="index.html">
        <img src="button_back_home.png" alt="Back to Home">
      </a>
    </div>
  </div>
</main>

<script>
  // Initialize EmailJS with your credentials
  (function(){
    emailjs.init("7UdfxAisFukkxmXWS"); // Your Public Key
  })();

  // Get plan from URL parameters
  const urlParams = new URLSearchParams(window.location.search);
  const plan = urlParams.get('plan') || 'executive'; // Default to executive if no plan specified
  
  // Set plan in hidden field
  document.getElementById('planType').value = plan;
  
  // Plan configuration
  const planConfig = {
    'starter': { 
      name: 'Starter Clerk', 
      limit: 3, 
      title: 'Setting up your Starter Clerk'
    },
    'growth': { 
      name: 'Growth Clerk', 
      limit: 5, 
      title: 'Setting up your Growth Clerk'
    },
    'pro': { 
      name: 'Pro Clerk', 
      limit: 8, 
      title: 'Setting up your Pro Clerk'
    },
    'executive': { 
      name: 'Executive Clerk', 
      limit: 10, 
      title: 'Setting up your Executive Clerk'
    }
  };

  // Get current plan configuration
  const currentPlan = planConfig[plan] || planConfig['executive'];
  const functionLimit = currentPlan.limit;

  // Update UI with plan-specific information
  document.getElementById('planTitle').textContent = currentPlan.title;
  document.getElementById('functionLimit').textContent = `(select up to ${functionLimit} for your ${currentPlan.name})`;
  document.getElementById('maxSelections').textContent = functionLimit;

  // Function to enforce checkbox limits
  function enforceFunctionLimit() {
    const checkboxes = document.querySelectorAll('input[name="functions"]');
    const checked = document.querySelectorAll('input[name="functions"]:checked');
    const warning = document.getElementById('limitWarning');

    if (checked.length >= functionLimit) {
      // Disable unchecked boxes
      checkboxes.forEach(cb => {
        if (!cb.checked) {
          cb.disabled = true;
        }
      });
      
      if (checked.length > functionLimit) {
        warning.style.display = 'block';
      } else {
        warning.style.display = 'none';
      }
    } else {
      // Enable all boxes
      checkboxes.forEach(cb => {
        cb.disabled = false;
      });
      warning.style.display = 'none';
    }
  }

  // Add event listeners to checkboxes
  document.querySelectorAll('input[name="functions"]').forEach(checkbox => {
    checkbox.addEventListener('change', enforceFunctionLimit);
  });

  function sendForm() {
    const form = document.getElementById("setupForm");
    const checked = document.querySelectorAll('input[name="functions"]:checked');
    
    // Check if required fields are filled
    const requiredFields = form.querySelectorAll('[required]');
    let isValid = true;
    
    requiredFields.forEach(field => {
      if (!field.value.trim()) {
        isValid = false;
        field.style.borderColor = '#f87171';
      } else {
        field.style.borderColor = '#d1d5db';
      }
    });

    if (!isValid) {
      alert('Please fill in all required fields.');
      return;
    }

    if (checked.length === 0) {
      alert('Please select at least one function for your clerk.');
      return;
    }

    if (checked.length > functionLimit) {
      alert(`Please select no more than ${functionLimit} functions for your ${currentPlan.name}.`);
      return;
    }

    // Prepare the functions list
    const functionsList = Array.from(checked).map(cb => cb.value).join(', ');
    
    // Create form data with functions as a string
    const formData = new FormData(form);
    formData.set('functions', functionsList);

    // Send via EmailJS
    emailjs.sendForm("service_sryfi8d", "template_od0bhoi", form)
      .then(() => {
        alert(`üéâ Setup request sent successfully! We'll configure your ${currentPlan.name} and contact you within 24 hours.`);
        form.reset();
      }, (error) => {
        alert("‚ö†Ô∏è Something went wrong. Please try again or contact support@asistant.pro");
        console.error("EmailJS Error:", error);
      });
  }
</script>

</body>
</html>